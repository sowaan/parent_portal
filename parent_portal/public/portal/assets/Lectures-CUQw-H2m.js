var m=(u,h,l)=>new Promise((p,n)=>{var x=r=>{try{c(l.next(r))}catch(i){n(i)}},d=r=>{try{c(l.throw(r))}catch(i){n(i)}},c=r=>r.done?p(r.value):Promise.resolve(r.value).then(x,d);c((l=l.apply(u,h)).next())});import{r as a,j as e,f as v}from"./index-DHC1J-Z3.js";import{C,a as o}from"./CRow-CS0UGAKT.js";import{C as y}from"./CCard-Ctp6_UM5.js";import{C as H}from"./CCardHeader-CIQ_3opb.js";import{C as _}from"./CFormSelect-CilfhOwp.js";import{C as I}from"./CFormInput-Crel1Lim.js";import{C as F}from"./CButton-DdvSfOFq.js";import{C as w}from"./CCardBody-DIRZnGaz.js";import{C as V,a as q}from"./CCardTitle-Fy7Y2LEK.js";const W=()=>{const[u,h]=a.useState([]),[l,p]=a.useState([]),[n,x]=a.useState([]),[d,c]=a.useState(""),[r,i]=a.useState(""),[j,N]=a.useState(""),[f,k]=a.useState(""),E=t=>c(t.target.value),T=t=>i(t.target.value),b=t=>N(t.target.value),D=t=>k(t.target.value);function L(){return m(this,null,function*(){try{const t=yield v.get("/api/method/parent_portal.parent_portal.api.get_student_details");p(t.data.message)}catch(t){console.error("Failed to fetch students:",t)}})}function g(t){return m(this,null,function*(){try{const s=yield v.get("/api/method/parent_portal.parent_portal.api.get_lectures_for_students",{params:t});h(s.data.message);const S=new Set;s.data.message.forEach(R=>{S.add(R.course)}),x(S),console.log("Courses",n)}catch(s){console.error("Failed to fetch lectures:",s.response||s.message)}})}const B=()=>{g({student:r||void 0,date:d||void 0,title:j||void 0,course:f||void 0})};return a.useEffect(()=>{L()},[]),a.useEffect(()=>{g({})},[]),e.jsx(C,{className:"mx-4",children:e.jsx(o,{xs:!0,children:e.jsxs(y,{className:"mb-4",children:[e.jsx(H,{children:e.jsxs(C,{children:[e.jsx(o,{xs:!0,children:e.jsxs(_,{"aria-label":"Select student",value:r,onChange:T,children:[e.jsx("option",{value:"",children:"Student"}),l.map((t,s)=>e.jsx("option",{value:t.name,children:t.first_name},s))]})}),e.jsx(o,{xs:!0,children:e.jsx("div",{className:"date-picker",children:e.jsx("div",{className:"date-picker-input-group",children:e.jsx("input",{type:"date",autoComplete:"off",placeholder:"Select date",className:"date-picker-input",value:d,onChange:E})})})}),e.jsx(o,{xs:!0,children:e.jsx(I,{type:"text",placeholder:"Title",value:j,onChange:b})}),e.jsx(o,{xs:!0,children:e.jsxs(_,{"aria-label":"Select course",value:f,onChange:D,children:[e.jsx("option",{value:"",children:"Course"}),n.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})}),e.jsx(o,{xs:!0,children:e.jsx(F,{color:"primary",style:{float:"right"},onClick:B,children:"Filter"})})]})}),e.jsx(w,{children:e.jsx(C,{children:u.map((t,s)=>e.jsx(o,{sm:6,xl:4,xxl:3,children:e.jsxs(y,{style:{width:"18rem"},children:[e.jsx("iframe",{src:t.resource,height:160,className:"card-img-top"}),e.jsxs(w,{children:[e.jsx(V,{children:t.title}),e.jsx(q,{children:t.description}),e.jsx(F,{color:"primary",target:"_blank",href:t.resource,children:"View"})]})]})},s))})})]})})})};export{W as default};
