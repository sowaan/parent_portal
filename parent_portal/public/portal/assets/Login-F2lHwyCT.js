var N=(e,n,a)=>new Promise((r,o)=>{var i=t=>{try{u(a.next(t))}catch(p){o(p)}},c=t=>{try{u(a.throw(t))}catch(p){o(p)}},u=t=>t.done?r(t.value):Promise.resolve(t.value).then(i,c);u((a=a.apply(e,n)).next())});import{r as l,_ as C,R as L,a as b,c as S,P as m,d as M,u as T,j as s,C as Z,b as w}from"./index-DN1Ilg8H.js";import{a as V,s as z,b as A,C as F}from"./sowaan-BZG4R8fw.js";import{C as G,a as y}from"./CFormInput-CKE0G9Of.js";var h=l.forwardRef(function(e,n){var a,r=e.children,o=e.className,i=e.size,c=C(e,["children","className","size"]);return L.createElement("div",b({className:S("input-group",(a={},a["input-group-".concat(i)]=i,a),o)},c,{ref:n}),r)});h.propTypes={children:m.node,className:m.string,size:m.oneOf(["sm","lg"])};h.displayName="CInputGroup";var x=l.forwardRef(function(e,n){var a=e.children,r=e.as,o=r===void 0?"span":r,i=e.className,c=C(e,["children","as","className"]);return L.createElement(o,b({className:S("input-group-text",i)},c,{ref:n}),a)});x.propTypes={as:m.elementType,children:m.node,className:m.string};x.displayName="CInputGroupText";var D=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M397.222,139.1l-.218-.223c-61.693-61.692-154.082-74.423-228.455-38.211l24.213,24.213c60.468-24.573,132.5-12.4,181.509,36.52L464,254.683v3.107L396.179,328.3l22.63,22.63L496,270.683V241.79Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M358.99,290.323A103.984,103.984,0,0,0,221.677,153.01l25.09,25.09A71.974,71.974,0,0,1,333.9,265.233Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M16,16V37.94l99.977,99.978c-.326.321-.656.636-.981.96L16,241.79v28.893l98.778,102.689.218.222a199.715,199.715,0,0,0,257.5,20.84L474.06,496H496V472.687L39.313,16ZM81.982,219.355l17.036-17.71L293.14,395.767a168.457,168.457,0,0,1-30.727,4.018ZM48,257.79v-3.107l11.794-12.261L211.233,393.861a166.38,166.38,0,0,1-73.5-42.788ZM326.879,384.252,121.206,178.578,137.729,161.4c.29-.289.586-.567.877-.854l210.9,210.9A166.053,166.053,0,0,1,326.879,384.252Z' class='ci-primary'/>"];const O="/assets/parent_portal/portal/assets/student-login-en7xmlAg.svg",U=()=>{var v;const{isLoading:e,currentUser:n}=M(),a=T(),r=JSON.parse(localStorage.getItem("appData")),[o,i]=l.useState(""),[c,u]=l.useState(""),[t,p]=l.useState(""),[f,g]=l.useState(!1),[E,I]=l.useState(!1),P=()=>{I(d=>!d)},R=d=>N(void 0,null,function*(){d.preventDefault(),p(""),g(!0);try{if((yield w.post("/api/method/login",{usr:o,pwd:c})).status===200){const _=(yield w.get("/api/method/parent_portal.parent_portal.api.get_currentuser")).data.message;localStorage.setItem("user",JSON.stringify(_)),window.location.pathname="/portal/student-fee",g(!1)}}catch(j){g(!1),console.log(j,"error"),p("Invalid email or password")}});return l.useEffect(()=>{n&&a("/")},[n]),l.useEffect(()=>{},[r]),e?s.jsx("div",{className:"pt-3 text-center",children:s.jsx(Z,{color:"primary",variant:"grow"})}):s.jsx("div",{className:"c-container",children:s.jsxs("div",{className:"c-login",children:[s.jsxs("div",{className:"c-login-left",children:[s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx(V,{className:"mb-3",src:(v=r.app_logo)!=null?v:z,alt:"Sowaan Logo",height:60})}),t?s.jsx("p",{className:"text-danger",children:t}):s.jsxs("h5",{className:"d-flex justify-content-center",children:["Login to ",r.app_name]}),s.jsxs(G,{onSubmit:R,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),s.jsx(y,{id:"email",placeholder:"Email",autoComplete:"email",value:o,onChange:d=>i(d.target.value),required:!0})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),s.jsxs(h,{children:[s.jsx(y,{type:E?"text":"password",id:"password",placeholder:"Password",value:c,onChange:d=>u(d.target.value),required:!0}),s.jsx(x,{onClick:P,style:{cursor:"pointer"},children:s.jsx(A,{icon:D})})]})]}),s.jsx(F,{disabled:f,type:"submit",color:"primary",className:"w-100 mt-3",children:f?"Loading...":"Login"})]})]}),s.jsxs("div",{className:"c-login-right",children:[s.jsxs("h1",{children:["Welcome to ",s.jsx("br",{})," Parent portal"]}),s.jsx("p",{children:"Login to access your account"}),s.jsx("img",{src:O,alt:"students",style:{width:"60%"}})]})]})})};export{U as default};
