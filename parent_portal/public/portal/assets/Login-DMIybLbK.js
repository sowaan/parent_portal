var E=(e,i,a)=>new Promise((r,l)=>{var c=t=>{try{m(a.next(t))}catch(p){l(p)}},o=t=>{try{m(a.throw(t))}catch(p){l(p)}},m=t=>t.done?r(t.value):Promise.resolve(t.value).then(c,o);m((a=a.apply(e,i)).next())});import{r as d,_ as x,R as v,i as N,k as y,P as n,l as Z,m as H,u as O,j as s,n as V,s as _,C as A,e as I,o as F,f as G,d as P}from"./index-CEegmSMn.js";var j=d.forwardRef(function(e,i){var a,r=e.children,l=e.className,c=e.size,o=x(e,["children","className","size"]);return v.createElement("div",N({className:y("input-group",(a={},a["input-group-".concat(c)]=c,a),l)},o,{ref:i}),r)});j.propTypes={children:n.node,className:n.string,size:n.oneOf(["sm","lg"])};j.displayName="CInputGroup";var w=d.forwardRef(function(e,i){var a=e.children,r=e.as,l=r===void 0?"span":r,c=e.className,o=x(e,["children","as","className"]);return v.createElement(l,N({className:y("input-group-text",c)},o,{ref:i}),a)});w.propTypes={as:n.elementType,children:n.node,className:n.string};w.displayName="CInputGroupText";var L=d.forwardRef(function(e,i){var a,r=e.as,l=r===void 0?"div":r,c=e.className,o=e.color,m=e.size,t=e.variant,p=t===void 0?"border":t,g=e.visuallyHiddenLabel,h=g===void 0?"Loading...":g,f=x(e,["as","className","color","size","variant","visuallyHiddenLabel"]);return v.createElement(l,N({className:y("spinner-".concat(p),(a={},a["spinner-".concat(p,"-").concat(m)]=m,a["text-".concat(o)]=o,a),c),role:"status"},f,{ref:i}),v.createElement("span",{className:"visually-hidden"},h))});L.propTypes={as:n.string,className:n.string,color:Z,size:n.oneOf(["sm"]),variant:n.oneOf(["border","grow"]),visuallyHiddenLabel:n.string};L.displayName="CSpinner";var D=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M397.222,139.1l-.218-.223c-61.693-61.692-154.082-74.423-228.455-38.211l24.213,24.213c60.468-24.573,132.5-12.4,181.509,36.52L464,254.683v3.107L396.179,328.3l22.63,22.63L496,270.683V241.79Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M358.99,290.323A103.984,103.984,0,0,0,221.677,153.01l25.09,25.09A71.974,71.974,0,0,1,333.9,265.233Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M16,16V37.94l99.977,99.978c-.326.321-.656.636-.981.96L16,241.79v28.893l98.778,102.689.218.222a199.715,199.715,0,0,0,257.5,20.84L474.06,496H496V472.687L39.313,16ZM81.982,219.355l17.036-17.71L293.14,395.767a168.457,168.457,0,0,1-30.727,4.018ZM48,257.79v-3.107l11.794-12.261L211.233,393.861a166.38,166.38,0,0,1-73.5-42.788ZM326.879,384.252,121.206,178.578,137.729,161.4c.29-.289.586-.567.877-.854l210.9,210.9A166.053,166.053,0,0,1,326.879,384.252Z' class='ci-primary'/>"];const k="/assets/parent_portal/portal/assets/student-login-en7xmlAg.svg",U=()=>{var b,C;const{isLoading:e,currentUser:i}=H(),a=O(),r=JSON.parse(localStorage.getItem("appData")),[l,c]=d.useState(""),[o,m]=d.useState(""),[t,p]=d.useState(""),[g,h]=d.useState(!1),[f,R]=d.useState(!1),z=()=>{R(u=>!u)},T=u=>E(void 0,null,function*(){u.preventDefault(),p(""),h(!0);try{if((yield P.post("/api/method/login",{usr:l,pwd:o})).status===200){const M=(yield P.get("/api/method/parent_portal.parent_portal.api.get_currentuser")).data.message;localStorage.setItem("user",JSON.stringify(M)),window.location.pathname="/portal",h(!1)}}catch(S){h(!1),console.log(S,"error"),p("Invalid email or password")}});return d.useEffect(()=>{i&&a("/")},[i]),d.useEffect(()=>{},[r]),e?s.jsx("div",{className:"pt-3 text-center",children:s.jsx(L,{color:"primary",variant:"grow"})}):s.jsx("div",{className:"c-container",children:s.jsxs("div",{className:"c-login",children:[s.jsxs("div",{className:"c-login-left",children:[s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx(V,{className:"mb-3",src:(b=r?r.app_logo:null)!=null?b:_,alt:"Sowaan Logo",height:60})}),t?s.jsx("p",{className:"text-danger",children:t}):s.jsxs("h5",{className:"d-flex justify-content-center",children:["Login to ",(C=r?r.app_name:null)!=null?C:"Sowaan"]}),s.jsxs(A,{onSubmit:T,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),s.jsx(I,{id:"email",placeholder:"Email",autoComplete:"email",value:l,onChange:u=>c(u.target.value),required:!0})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),s.jsxs(j,{children:[s.jsx(I,{type:f?"text":"password",id:"password",placeholder:"Password",value:o,onChange:u=>m(u.target.value),required:!0}),s.jsx(w,{onClick:z,style:{cursor:"pointer"},children:s.jsx(F,{icon:D})})]})]}),s.jsx(G,{disabled:g,type:"submit",color:"primary",className:"w-100 mt-3",children:g?"Loading...":"Login"})]})]}),s.jsxs("div",{className:"c-login-right",children:[s.jsxs("h1",{children:["Welcome to ",s.jsx("br",{})," Parent portal"]}),s.jsx("p",{children:"Login to access your account"}),s.jsx("img",{src:k,alt:"students",style:{width:"60%"}})]})]})})};export{U as default};
