var j=(i,o,r)=>new Promise((u,n)=>{var x=a=>{try{c(r.next(a))}catch(d){n(d)}},m=a=>{try{c(r.throw(a))}catch(d){n(d)}},c=a=>a.done?u(a.value):Promise.resolve(a.value).then(x,m);c((r=r.apply(i,o)).next())});import{j as e,q as L,r as l,F as E,f as T}from"./index-BqFFroKm.js";import{C as q,a as v}from"./CommonClasses-DWDFnoTg.js";import{S as b}from"./SelectField-C2KTAYRg.js";const D=({document:i,title:o,description:r,readMore:u,buttonText:n})=>e.jsxs("div",{className:"max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700",children:[i,e.jsxs("div",{className:"p-5",children:[e.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:o}),e.jsx("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:r}),e.jsxs("a",{target:"_blank",href:u,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[n,e.jsx(L,{})]})]})]}),R=()=>{const[i,o]=l.useState([]),{data:r,isLoading:u}=E("parent_portal.parent_portal.api.get_student_details"),[n,x]=l.useState([]),[m,c]=l.useState(""),[a,d]=l.useState(""),[g,w]=l.useState(""),[p,N]=l.useState(""),C=t=>c(t.target.value),S=t=>d(t.target.value),y=t=>w(t.target.value),F=t=>N(t.target.value);function h(t){return j(this,null,function*(){try{const s=yield T.get("/api/method/parent_portal.parent_portal.api.get_lectures_for_students",{params:t});o(s.data.message);const f=new Set;s.data.message.forEach(_=>{f.add(_.course)}),x(f)}catch(s){console.error("Failed to fetch lectures:",s.response||s.message)}})}const k=()=>{h({student:a||void 0,date:m||void 0,title:g||void 0,course:p||void 0})};return l.useEffect(()=>{h({})},[]),e.jsxs("div",{className:q,children:[e.jsxs("div",{className:"mb-5.5 flex flex-col gap-5.5 sm:flex-row",children:[e.jsx("div",{className:"w-full sm:w-47.5",children:e.jsx(b,{label:"",selectedOption:a,onChange:S,required:!0,options:e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select Student"}),r&&r.message.map((t,s)=>e.jsx("option",{value:t.name,children:t.first_name},s))]})})}),e.jsx("div",{className:"w-full sm:w-47.5",children:e.jsx("div",{className:"relative",children:e.jsx("input",{className:`${v} date-picker-input`,type:"date",name:"date",id:"date",value:m,onChange:C})})}),e.jsx("div",{className:"w-full sm:w-47.5",children:e.jsx("div",{className:"relative",children:e.jsx("input",{className:v,value:g,onChange:y,placeholder:"Title",type:"text",name:"title",id:"title"})})}),e.jsx("div",{className:"w-full sm:w-47.5",children:e.jsx(b,{label:"",selectedOption:p,onChange:F,required:!0,options:e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Select Course"}),[...n].map((t,s)=>e.jsx("option",{value:t,children:t},s))]})})}),e.jsx("button",{onClick:k,className:"inline-flex items-center justify-center gap-2.5 rounded-lg bg-primary py-3 px-10 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10",children:"Filter"})]}),e.jsx("hr",{className:"mb-5.5"}),e.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-3 xxl:grid-cols-4",children:i.map((t,s)=>e.jsx("div",{className:"col-span-1",children:e.jsx(D,{document:e.jsx("iframe",{src:t.resource,height:160,className:"card-img-top rounded-t-lg max-w-sm w-full"}),title:t.title,description:t.description,readMore:t.resource,buttonText:"View"})},s))})]})};export{R as default};
