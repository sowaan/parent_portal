var j=(h,x,c)=>new Promise((p,s)=>{var o=a=>{try{l(c.next(a))}catch(n){s(n)}},i=a=>{try{l(c.throw(a))}catch(n){s(n)}},l=a=>a.done?p(a.value):Promise.resolve(a.value).then(o,i);l((c=c.apply(h,x)).next())});import{r as d,j as e,f as b}from"./index-DHC1J-Z3.js";import{C as f,a as m}from"./CRow-CS0UGAKT.js";import{C as y}from"./CCard-Ctp6_UM5.js";import{C as S}from"./CCardHeader-CIQ_3opb.js";import{C as _}from"./CFormSelect-CilfhOwp.js";const N=()=>{const[h,x]=d.useState([]),[c,p]=d.useState(null),[s,o]=d.useState(),[i,l]=d.useState("");let a="";function n(){return j(this,null,function*(){try{const t=yield b.get("/api/method/parent_portal.parent_portal.api.get_student_batch");x(t.data.message)}catch(t){console.error("Failed to fetch batch:",t)}})}function C(t){return j(this,null,function*(){try{const r=yield b.get("/api/method/parent_portal.parent_portal.api.get_timetable",{params:{batch:t}});o(r.data.message)}catch(r){o(),l(r.response.data)}})}return d.useEffect(()=>{n()},[]),e.jsx(f,{className:"mx-4",children:e.jsx(m,{xs:!0,children:e.jsxs(y,{className:"mb-4",children:[e.jsx(S,{children:e.jsxs(f,{children:[e.jsx(m,{children:s&&s.title?s.title:"Timetable"}),e.jsx(m,{children:e.jsxs(_,{"aria-label":"Select course",value:c,onChange:t=>{p(t.target.value),C(t.target.value)},children:[e.jsx("option",{value:"",children:"Batch"}),h.map((t,r)=>e.jsx("option",{value:t,children:t},r))]})})]})}),s?e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Day"}),e.jsx("th",{children:"Instructor Name"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"End Date"}),e.jsx("th",{children:"Course"})]})}),e.jsx("tbody",{children:s&&s.timetable_details.map((t,r)=>{const u=t.day!==a;return u&&(a=t.day),e.jsxs("tr",{children:[e.jsx("td",{children:u?t.day:""}),e.jsx("td",{children:t.instructor_name}),e.jsx("td",{children:t.start_date}),e.jsx("td",{children:t.end_date}),e.jsx("td",{children:t.course})]},r)})})]}):e.jsx("div",{children:i?JSON.stringify(i):"Please Select Batch"})]})})})};export{N as default};
