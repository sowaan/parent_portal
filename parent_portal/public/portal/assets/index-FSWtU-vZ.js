var g=(i,u,s)=>new Promise((m,d)=>{var o=a=>{try{l(s.next(a))}catch(c){d(c)}},p=a=>{try{l(s.throw(a))}catch(c){d(c)}},l=a=>a.done?m(a.value):Promise.resolve(a.value).then(o,p);l((s=s.apply(i,u)).next())});import{u as f,r as n,j as t,D as v,E as h,F as S,G as _,H as y,f as F,o as N,U as D,X as E,d as j}from"./index-CEegmSMn.js";var H=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"];const w=()=>{const i=f(),[u,s]=n.useState([]),[m,d]=n.useState(""),[o,p]=n.useState([]),[l,a]=n.useState(!0);function c(){return g(this,null,function*(){try{let e=yield j.get("/api/method/parent_portal.parent_portal.api.get_student_details");s(e.data.message)}catch(e){console.error("Failed to fetch students:",e.response||e.message)}})}function x(e){return g(this,null,function*(){try{a(!0);let r=yield j.get("/api/method/parent_portal.parent_portal.api.get_student_leave_applications",{params:{student:e}});p(r.data.message),a(!1)}catch(r){a(!1),console.error("Failed to fetch student leave:",r.response||r.message)}})}n.useEffect(()=>{c(),x()},[]);const C=n.useMemo(()=>[{name:"ID",selector:e=>t.jsx("div",{onClick:()=>{i(`/student-leave/${e.name}`)},children:e.name})},{name:"Student Name",selector:e=>e.student_name},{name:"From Date",selector:e=>e.from_date,sortable:!0},{name:"To Date",selector:e=>e.to_date}],[o]);return t.jsx(v,{className:"mx-4",children:t.jsx(h,{xs:!0,children:t.jsxs(S,{className:"mb-4",children:[t.jsx(_,{children:t.jsxs(v,{children:[t.jsx(h,{xs:!0,children:t.jsxs(y,{"aria-label":"Select student",value:m,onChange:e=>{d(e.target.value),x(e.target.value)},children:[t.jsx("option",{value:"",children:"Student"}),u.map((e,r)=>t.jsx("option",{value:e.name,children:e.first_name},r))]})}),t.jsx(h,{xs:!0,children:t.jsxs(F,{color:"primary",onClick:()=>i("/student-leave/new"),style:{float:"right"},children:[t.jsx(N,{icon:H,className:"nav-icon"})," Add"]})})]})}),t.jsx(D,{children:t.jsx(E,{columns:C,data:o.length>0?o:[],progressPending:l,pagination:!0,highlightOnHover:!0,pointerOnHover:!0})})]})})})};export{w as default};
